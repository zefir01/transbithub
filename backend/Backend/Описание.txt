интеграция
    ссылки
        хелпер
            на счет
            на объявление
        без хелпера
            на счет
            на объявление
    ссылки телега
        на счет
        на объявление
    ифрэймы
        счет
            в ифрэйм
                части
                валюта
                переменная
            из ифрэйма
                части
                валюта
                переменная
                переход к оплате
        объявление
    вебхуки
        счета
            платеж оплачен
                запрос секретов

мастер функции:
1) покупка крипты
    на баланс
    вывод на биткоин
    промис
2) оплата счета
    с баланса
    через сделку
    промисом
3) продажа и обнал промиса
    продажа на баланс
    продажа с выводом на биткоин
    продажа с выводом на лайтинг

этап определения алгоритма
    что нужно сделать
        купить крипту
        оплатить счет
        продать промис за фиат
        зачислить промис на баланс
    чем за это заплатить
        фиатом
        криптой
        промисом
    куда деть результат
        на баланс
        вывести на биткоин
        вывести на лайтинг

покупка крипты
    выбор страны
    выбор валюты
    выбор способа оплаты
    выбор суммы
    на баланс
    вывод на биткоин
    сделка
    результат (промис)

оплата счета
    запрос номера
    выбор количества частей
    выбор способа оплаты
        крипта
            крипта с баланса
            крипта с кошелька лайтинг
        фиат
            выбор страны
            выбор валюты
            выбор способа оплаты
            сделка
        промис
    оплата
    сдача с промиса (опционально)
    результат
    связь с продавцом (опционально)

продажа и обнал промиса
    продать за фиат
        выбор страны
        выбор валюты
        выбор способа оплаты
        сделка
    на баланс
    
        
    







трехсторонние сделки:
    выставление счета:
        публичный счет:
            с фиксированной суммой
            ВОЗМОЖНО ограничение на количество сделок
            с плавающей суммой
            ВОЗМОЖНО ограничение на общую сумму
            Создается счет с ид, по счету производится оплата, инициатор ОБЯЗАТЕЛЬНО получает подписанный чек, который можно проверить на сайте по подписи,
            на принадлежность к счету и получить декодированную информацию. Сделка автоматически закрывается, когда достигнут лимит. Показывается колво покупок и сумма.
        приватный счет:
            с фиксированной суммой
            Конкретному пользователю, по имени, телефону, почте, выставляется счет, на фиксированную сумму, при оплате, инициатор МОЖЕТ получить 
            подписанный чек,  который можно проверить на сайте по подписи, на принадлежность к счету и получить декодированную информацию. Сделка автоматически закрывается, когда достигнут лимит. Показывается колво покупок и сумма.

    из фиата в крипту:
    инициатор нажимает кнопку оплатить, 
    ему выдается список подходящих объявлений, 
    он выбирает объявление, 
    у владельца объявы замораживаются средства, 
    договаривается, 
    переводит фиат, 
    посредник подтверждает получение фиата, 
    крипта переводится создателю счета, 
    сделка закрывается.
    Отзывы между посредником и инициатором.
    
    из крипты в фиат:
    !!!владелец должен иметь депозит хотябы на одну сделку!!!
    инициатор нажимает кнопку оплатить, 
    у инициатора замораживаются средства, 
    у владельца замораживаются средства.
    владелец счета получает запрос на сделку, 
    владелец выбирает объявление для посредничества,  
    владелец договаривается с посредником, 
    посредник переводит фиат владельцу счета, 
    владелец счета подтверждает получение фиата, сделка закрывается.
    Отзывы между посредником и владельцем.
    
        посредник покупает крипту за фиат объявлением.
        владелец счета, получает фиат.
        инициатор отдает крипту.